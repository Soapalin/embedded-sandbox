<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Project: FTM module documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="PMcL.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___f_t_m__module.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">FTM module documentation</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga4b41dfc84609ff0b3011e9fdc74ac8b8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___f_t_m__module.html#ga4b41dfc84609ff0b3011e9fdc74ac8b8">NUMBER_OF_CHANNELS</a>&#160;&#160;&#160;7</td></tr>
<tr class="separator:ga4b41dfc84609ff0b3011e9fdc74ac8b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaefbf99e8815b4feccfa0fbc0126f05b6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___f_t_m__module.html#gaefbf99e8815b4feccfa0fbc0126f05b6">FIXED_FREQUENCY_CLOCK</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:gaefbf99e8815b4feccfa0fbc0126f05b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga5f31811e067b5690d5f73c8e77019a6b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___f_t_m__module.html#ga5f31811e067b5690d5f73c8e77019a6b">FTM_Init</a> ()</td></tr>
<tr class="memdesc:ga5f31811e067b5690d5f73c8e77019a6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up the FTM before first use.  <a href="#ga5f31811e067b5690d5f73c8e77019a6b">More...</a><br /></td></tr>
<tr class="separator:ga5f31811e067b5690d5f73c8e77019a6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae4928af832114c8173e43d10e4144c1f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___f_t_m__module.html#gae4928af832114c8173e43d10e4144c1f">FTM_Set</a> (const <a class="el" href="struct_t_f_t_m_channel.html">TFTMChannel</a> *const aFTMChannel)</td></tr>
<tr class="memdesc:gae4928af832114c8173e43d10e4144c1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up a timer channel.  <a href="#gae4928af832114c8173e43d10e4144c1f">More...</a><br /></td></tr>
<tr class="separator:gae4928af832114c8173e43d10e4144c1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabb34a0dd79d879502fd81c0efa9440ec"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___f_t_m__module.html#gabb34a0dd79d879502fd81c0efa9440ec">FTM_StartTimer</a> (const <a class="el" href="struct_t_f_t_m_channel.html">TFTMChannel</a> *const aFTMChannel)</td></tr>
<tr class="memdesc:gabb34a0dd79d879502fd81c0efa9440ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts a timer if set up for output compare.  <a href="#gabb34a0dd79d879502fd81c0efa9440ec">More...</a><br /></td></tr>
<tr class="separator:gabb34a0dd79d879502fd81c0efa9440ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga445500277ba0e363873b34cffc015745"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___f_t_m__module.html#ga445500277ba0e363873b34cffc015745">__attribute__</a> ((interrupt))</td></tr>
<tr class="memdesc:ga445500277ba0e363873b34cffc015745"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt service routine for the FTM.  <a href="#ga445500277ba0e363873b34cffc015745">More...</a><br /></td></tr>
<tr class="separator:ga445500277ba0e363873b34cffc015745"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gadf3c2c2e85e6c65ea9b0798338c31691"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___f_t_m__module.html#gadf3c2c2e85e6c65ea9b0798338c31691">FTM0_Arguments</a> [<a class="el" href="group___f_t_m__module.html#ga4b41dfc84609ff0b3011e9fdc74ac8b8">NUMBER_OF_CHANNELS</a>]</td></tr>
<tr class="separator:gadf3c2c2e85e6c65ea9b0798338c31691"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaec56fb2088584d5c08d767bd5a4a6295"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___f_t_m__module.html#gaec56fb2088584d5c08d767bd5a4a6295">FTM0_Callback</a> [<a class="el" href="group___f_t_m__module.html#ga4b41dfc84609ff0b3011e9fdc74ac8b8">NUMBER_OF_CHANNELS</a>])(void *)</td></tr>
<tr class="separator:gaec56fb2088584d5c08d767bd5a4a6295"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gaefbf99e8815b4feccfa0fbc0126f05b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FIXED_FREQUENCY_CLOCK&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>assign the fixed frequency clock value to be set in FTMx_SC register (pg. 1210) </p>

</div>
</div>
<a class="anchor" id="ga4b41dfc84609ff0b3011e9fdc74ac8b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUMBER_OF_CHANNELS&#160;&#160;&#160;7</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>defining the number of channels available (0-7) </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga445500277ba0e363873b34cffc015745"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __attribute__ </td>
          <td>(</td>
          <td class="paramtype">(interrupt)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Interrupt service routine for the FTM. </p>
<p>Interrupt service routine for the UART.</p>
<p>Interrupt service routine for the RTC.</p>
<p>Interrupt service routine for the PIT.</p>
<p>If a timer channel was set up as output compare, then the user callback function will be called. </p><dl class="section note"><dt>Note</dt><dd>Assumes the FTM has been initialized. </dd></dl>
<p>&lt; declare local variable channel, used in for loop</p>
<p>&lt; scroll through the channels to check if which interrupt flag enabled</p>
<p>&lt; Check current channel status and control register to see if current channel flag raised</p>
<p>&lt; Run the User Callback Function for channel with raised flag (in main, turning off Blue LED as requested in Lab 3 Hints)</p>
<p>&lt; clear output flag </p>

</div>
</div>
<a class="anchor" id="ga5f31811e067b5690d5f73c8e77019a6b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool FTM_Init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up the FTM before first use. </p>
<p>Enables the FTM as a free running 16-bit counter. </p><dl class="section return"><dt>Returns</dt><dd>bool - TRUE if the FTM was successfully initialized. </dd></dl>
<p>&lt; Initiate FTM0 clock gate control (Bit 24) (pg. 349)</p>
<p>&lt; variable to calculate bit location in NVIC registers (pg. 92).</p>
<p>&lt; Initiate CNTIN value, settings all bits to 0</p>
<p>&lt; Modulo Set, to cater for overflow</p>
<p>&lt; Setting counter value to FTM register for the count</p>
<p>&lt; Assigned fixed frequency clock (ref. Lab L3.2 #6) to CLK (bits 3 &amp; 4) in status and control register (ref. Lab L3.4 Hints #1)</p>
<p>&lt; Address = 0x4E = 138, Vector = 78, IRQ = 62. NVIC Non-IPR register = 1, NVIC IPR Register 15. (pg. 90)</p>
<p>&lt; Clear any pending interrupts on FTM0 referenced from Interrupts Document (5.16)</p>
<p>&lt; Enable interrupts from FTM0 module referenced from Interrupts Document (5.16) </p>

</div>
</div>
<a class="anchor" id="gae4928af832114c8173e43d10e4144c1f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool FTM_Set </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_t_f_t_m_channel.html">TFTMChannel</a> *const&#160;</td>
          <td class="paramname"><em>aFTMChannel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up a timer channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">aFTMChannel</td><td>is a structure containing the parameters to be used in setting up the timer channel. channelNb is the channel number of the FTM to use. delayCount is the delay count (in module clock periods) for an output compare event. timerFunction is used to set the timer up as either an input capture or an output compare. ioType is a union that depends on the setting of the channel as input capture or output compare: outputAction is the action to take on a successful output compare. inputDetection is the type of input capture detection. callbackFunction is a pointer to a user callback function. callbackArguments is a pointer to the user arguments to use with the user callback function. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool - TRUE if the timer was set up successfully. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Assumes the FTM has been initialized. </dd></dl>
<p>&lt; Timer Function Output Compare sets MSA as 0 and MSB as 0 (pg. 1219)</p>
<p>&lt; Check value of inputDection for case statement</p>
<p>&lt; 00 Off Configuration (Revert Channel Pin to GPIO)(pg. 1219)</p>
<p>&lt; 01 Rising Configuration (pg. 1219)</p>
<p>&lt; 10 Falling Configuration (pg. 1219)</p>
<p>&lt; 11 Rising or Falling Configuration (pg. 1219)</p>
<p>&lt; None of the cases specified, return false</p>
<p>&lt; Timer Function Output Compare sets MSA as 1 and MSB as 0 (pg. 1219)</p>
<p>&lt; Check value of outputAction for case statement</p>
<p>&lt; 00 Disconnect Configuration (Revert Channel Pin to GPIO)(pg. 1219)</p>
<p>&lt; 01 Toggle Configuration (pg. 1219)</p>
<p>&lt; 10 Low Configuration (pg. 1219)</p>
<p>&lt; 11 High Configuration (pg. 1219)</p>
<p>&lt; None of the cases specified, return false</p>
<p>&lt; If not output compare or input capture then unexpected value, return false </p>

</div>
</div>
<a class="anchor" id="gabb34a0dd79d879502fd81c0efa9440ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool FTM_StartTimer </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_t_f_t_m_channel.html">TFTMChannel</a> *const&#160;</td>
          <td class="paramname"><em>aFTMChannel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts a timer if set up for output compare. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">aFTMChannel</td><td>is a structure containing the parameters to be used in setting up the timer channel. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool - TRUE if the timer was started successfully. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Assumes the FTM has been initialized. </dd></dl>
<p>&lt; If Timer function set to output compare &amp; set channel within range of channels (0-7)</p>
<p>&lt; Set the 16-bit output compare register to CNT + Delay into current assigned channel, catering for overflow (ref. Timing and Generation 6.5)</p>
<p>&lt; Clear the output compare flag (ref. Timing and Generation 6.5)</p>
<p>&lt; Enable channel interrupts</p>
<p>&lt; Brief specifies only output compare to be used </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="gadf3c2c2e85e6c65ea9b0798338c31691"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* FTM0_Arguments[<a class="el" href="group___f_t_m__module.html#ga4b41dfc84609ff0b3011e9fdc74ac8b8">NUMBER_OF_CHANNELS</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>creating a pointer of type void, to store an arguement, in an array the size of number of channels </p>

</div>
</div>
<a class="anchor" id="gaec56fb2088584d5c08d767bd5a4a6295"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* FTM0_Callback[<a class="el" href="group___f_t_m__module.html#ga4b41dfc84609ff0b3011e9fdc74ac8b8">NUMBER_OF_CHANNELS</a>])(void *)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Callback function </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed May 8 2019 09:24:46 for Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
